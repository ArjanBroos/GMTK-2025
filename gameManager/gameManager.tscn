[gd_scene load_steps=10 format=3 uid="uid://b0otbtktu22j8"]

[ext_resource type="Script" uid="uid://5vjm45mn1xfm" path="res://gameManager/game_manager.gd" id="1_8equb"]
[ext_resource type="PackedScene" uid="uid://dfm10ac6t4mhr" path="res://HUD/gui.tscn" id="2_6ue64"]
[ext_resource type="PackedScene" uid="uid://5g3i4mhst5kb" path="res://player/player.tscn" id="2_ah4dg"]
[ext_resource type="PackedScene" uid="uid://c8no1lpcxau83" path="res://HUD/game_over.tscn" id="4_op76p"]
[ext_resource type="PackedScene" uid="uid://10aipp4jmgtd" path="res://addons/talo/samples/leaderboards/leaderboard.tscn" id="5_8gvic"]

[sub_resource type="LabelSettings" id="LabelSettings_op76p"]
font_size = 48
font_color = Color(0.12405, 0.543801, 0.724597, 1)
shadow_color = Color(0.662452, 0.662452, 0.662452, 0.592157)

[sub_resource type="Animation" id="Animation_8gvic"]
resource_name = "wiggle"
length = 0.15
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("multiplierLabel:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.0333333, 0.0666667, 0.1, 0.133333),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1),
"update": 0,
"values": [Vector2(1143, 25), Vector2(1144, 26), Vector2(1142, 24), Vector2(1143, 26), Vector2(1142, 26)]
}

[sub_resource type="Animation" id="Animation_ifvbb"]
resource_name = "boom"
length = 0.2
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("multiplierLabel:scale")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(1, 1), Vector2(2, 2), Vector2(1, 1)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_ifvbb"]
_data = {
&"boom": SubResource("Animation_ifvbb"),
&"wiggle": SubResource("Animation_8gvic")
}

[node name="GameManager" type="Node" node_paths=PackedStringArray("timeLabel", "scoreLabel", "game_over_hud", "highscores_hud")]
script = ExtResource("1_8equb")
timeLabel = NodePath("GUI/timeLabel")
scoreLabel = NodePath("GUI/scoreLabel")
game_over_hud = NodePath("GameOver")
highscores_hud = NodePath("Leaderboard")
player_scene = ExtResource("2_ah4dg")

[node name="GUI" parent="." instance=ExtResource("2_6ue64")]

[node name="timeLabel" type="Label" parent="GUI"]
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
offset_left = -32.0
offset_top = 18.0
offset_right = 32.0
offset_bottom = 41.0
grow_horizontal = 2
text = "00:00:00"

[node name="scoreLabel" type="Label" parent="GUI"]
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
offset_left = -32.0
offset_top = 38.0
offset_right = 29.0
offset_bottom = 61.0
grow_horizontal = 2
size_flags_horizontal = 4
size_flags_vertical = 0
text = "Score: 0"
horizontal_alignment = 1

[node name="multiplierLabel" type="Label" parent="GUI"]
visible = false
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -137.0
offset_top = 25.0
offset_right = -36.0
offset_bottom = 92.0
grow_horizontal = 0
pivot_offset = Vector2(50, 30)
text = "x%s"
label_settings = SubResource("LabelSettings_op76p")
horizontal_alignment = 1

[node name="ShieldAvailabilityIcon" type="Line2D" parent="GUI"]
position = Vector2(81, 650)
scale = Vector2(1.5, 1.5)
points = PackedVector2Array(-0.5, -28, 4, -23, 9, -23, 14, -28, 14, 2, -1, 13, -16, 2, -16, -28, -11, -23, -5, -23)
closed = true
width = 2.0
default_color = Color(0.0470588, 0.282353, 1, 1)
joint_mode = 2

[node name="MultiplierAnimation" type="AnimationPlayer" parent="GUI"]
libraries = {
&"": SubResource("AnimationLibrary_ifvbb")
}
autoplay = "wiggle"

[node name="GameOver" parent="." instance=ExtResource("4_op76p")]
visible = false

[node name="Leaderboard" parent="." instance=ExtResource("5_8gvic")]
visible = false

[node name="MultiplierTimer" type="Timer" parent="."]
wait_time = 5.0

[node name="DeathStopTimer" type="Timer" parent="."]
wait_time = 2.0

[node name="GravityWellSpawner" type="Node2D" parent="."]
