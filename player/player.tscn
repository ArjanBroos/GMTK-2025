[gd_scene load_steps=9 format=3 uid="uid://5g3i4mhst5kb"]

[ext_resource type="Script" uid="uid://cuk138uhfuit" path="res://player/player.gd" id="1_qjkh3"]
[ext_resource type="Script" uid="uid://b3s0q2nv1375l" path="res://player/tether.gd" id="2_g6k8r"]
[ext_resource type="Script" uid="uid://valb3o157auw" path="res://components/follow_cursor.gd" id="2_rkbax"]
[ext_resource type="PackedScene" uid="uid://dphb8dao47hrq" path="res://player/player_explosion.tscn" id="3_g6k8r"]
[ext_resource type="Script" uid="uid://c87y1h43er7n8" path="res://components/health.gd" id="3_yw30f"]
[ext_resource type="Script" uid="uid://bfb6nj1lrv6ay" path="res://components/hurt_box.gd" id="4_qjkh3"]

[sub_resource type="CircleShape2D" id="CircleShape2D_g6k8r"]
radius = 32.0156

[sub_resource type="CircleShape2D" id="CircleShape2D_boad6"]
radius = 26.0192

[node name="PlayerHome" type="Node2D"]

[node name="Tether" type="Line2D" parent="." node_paths=PackedStringArray("player")]
points = PackedVector2Array(0, 0, 0, 0)
width = 2.0
script = ExtResource("2_g6k8r")
player = NodePath("../Player")

[node name="Anchor" type="Node2D" parent="."]

[node name="Line2D" type="Line2D" parent="Anchor"]
points = PackedVector2Array(0, 13, 0, -5)
width = 2.0

[node name="Line2D2" type="Line2D" parent="Anchor"]
points = PackedVector2Array(6, 0, -6, 0)
width = 2.0

[node name="Line2D3" type="Line2D" parent="Anchor"]
position = Vector2(0, 3)
points = PackedVector2Array(7, 2, 6, 8, 4, 10, 0, 11, -4, 10, -6, 8, -7, 2)
width = 2.0

[node name="Player" type="Node2D" parent="." node_paths=PackedStringArray("health")]
position = Vector2(21, -21)
script = ExtResource("1_qjkh3")
health = NodePath("Health")
explosion_scene = ExtResource("3_g6k8r")
metadata/_custom_type_script = "uid://cuk138uhfuit"

[node name="ExhaustParticles" type="CPUParticles2D" parent="Player"]
position = Vector2(0, 16)
rotation = 1.598
amount = 2
lifetime = 0.07
randomness = 0.31
emission_shape = 3
emission_rect_extents = Vector2(2, 1)
gravity = Vector2(0, 0)
initial_velocity_min = 23.44
initial_velocity_max = 62.5
angle_min = -22.5
scale_amount_max = 2.0
color = Color(1, 0.368627, 0.309804, 1)
hue_variation_min = 0.03
hue_variation_max = 0.48

[node name="Visualization" type="Line2D" parent="Player"]
position = Vector2(-72, 7)
scale = Vector2(1.16591, 1.18069)
points = PackedVector2Array(52.3198, 2.54088, 53.1775, -4.2348, 56.6083, -5.92872, 57.466, -14.3983, 61.7545, -16.9392, 66.043, -14.3983, 67.7584, -5.92872, 71.1892, -4.2348, 72.0469, 2.54088, 67, 2, 65.1853, 5.92872, 59.1814, 5.92872, 57, 2, 52.3198, 2.54088, 53.1775, -4.2348)
width = 2.0
default_color = Color(0.687159, 0.00145028, 0.834129, 1)

[node name="FollowCursor" type="Node2D" parent="Player" node_paths=PackedStringArray("follower")]
script = ExtResource("2_rkbax")
follower = NodePath("..")
metadata/_custom_type_script = "uid://valb3o157auw"

[node name="Health" type="Node" parent="Player"]
script = ExtResource("3_yw30f")
metadata/_custom_type_script = "uid://c87y1h43er7n8"

[node name="HurtBox" type="Area2D" parent="Player" node_paths=PackedStringArray("health")]
visible = false
collision_layer = 2
script = ExtResource("4_qjkh3")
health = NodePath("../Health")
metadata/_custom_type_script = "uid://bfb6nj1lrv6ay"

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Player/HurtBox"]
polygon = PackedVector2Array(-9, 2, -11, 12, 13, 12, 10, 2, 5, -10, 0, -13, -4, -10)

[node name="NearMissBox" type="Area2D" parent="Player"]
visible = false
collision_layer = 16
collision_mask = 8

[node name="CollisionShape2D" type="CollisionShape2D" parent="Player/NearMissBox"]
shape = SubResource("CircleShape2D_g6k8r")

[node name="ShieldBox" type="Area2D" parent="Player"]
collision_layer = 32
collision_mask = 8

[node name="ShieldCollisionShape" type="CollisionShape2D" parent="Player/ShieldBox"]
shape = SubResource("CircleShape2D_boad6")
disabled = true

[node name="ShieldOutline" type="Line2D" parent="Player/ShieldBox"]
visible = false
closed = true
width = 2.0
default_color = Color(0.0460029, 0.283837, 1, 1)

[node name="ShieldTimer" type="Timer" parent="Player"]
wait_time = 0.2
one_shot = true

[node name="ShieldCooldownTimer" type="Timer" parent="Player"]
wait_time = 2.5
one_shot = true

[connection signal="body_exited" from="Player/NearMissBox" to="Tether" method="_on_near_miss_box_body_exited"]
[connection signal="body_entered" from="Player/ShieldBox" to="Tether" method="_on_shield_box_body_entered"]
